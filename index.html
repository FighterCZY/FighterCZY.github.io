
 <!DOCTYPE HTML>
<html lang="en">
<head>
  <meta charset="UTF-8">
  
    <title>Snail-Mushroom</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="Zach Cai with Kathy Zhao">
    

    
    <meta name="description" content="Personal Blog">
<meta property="og:type" content="website">
<meta property="og:title" content="Snail-Mushroom">
<meta property="og:url" content="http://snail-mushroom.com/index.html">
<meta property="og:site_name" content="Snail-Mushroom">
<meta property="og:description" content="Personal Blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Snail-Mushroom">
<meta name="twitter:description" content="Personal Blog">
<meta name="twitter:creator" content="@FighterCZY for https://twitter.com/fighterczy">

    
    <link rel="alternative" href="/atom.xml" title="Snail-Mushroom" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="Snail-Mushroom" title="Snail-Mushroom"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="Snail-Mushroom">Snail-Mushroom</a></h1>
				<h2 class="blog-motto">practice makes prefect</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜單">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
 					
					<form class="search" action="/search/index.html" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" autocomplete="off" name="q" maxlength="20" placeholder="搜索" />
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main">

   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/05/05/migrate-hexo/" title="migrate-hexo" itemprop="url">migrate-hexo</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Zach Cai with Kathy Zhao" target="_blank" itemprop="author">Zach Cai with Kathy Zhao</a>
		
  <p class="article-time">
    <time datetime="2015-05-06T04:25:19.000Z" itemprop="datePublished"> 發表於 May 5 2015</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="hexo_从air_搬到_pro">hexo 从air 搬到 pro</h1><h3 id="最主要的几步">最主要的几步</h3><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cp _config.yml back_up_config    </span><br><span class="line">hexo init &lt;hexo-<span class="keyword">dir</span>&gt;    </span><br><span class="line">mv back_up_config _config.yml    </span><br><span class="line">hexo <span class="keyword">update</span>   </span><br><span class="line">sudo npm up npm -<span class="keyword">g</span>   </span><br><span class="line">npm install   </span><br><span class="line">hexo clean    </span><br><span class="line">hexo <span class="keyword">generate</span></span><br></pre></td></tr></table></figure>
<h3 id="clean_cache">clean cache</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">hexo</span> clean</span><br></pre></td></tr></table></figure>
<h3 id="install_hexo">install hexo</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="operator"><span class="keyword">install</span> hexo <span class="comment">--save</span></span></span><br></pre></td></tr></table></figure>
<h3 id="install_generators">install generators</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="operator"><span class="keyword">install</span> hexo-generator-<span class="keyword">index</span> <span class="comment">--save</span></span><br><span class="line">npm <span class="keyword">install</span> hexo-generator-archive <span class="comment">--save</span></span><br><span class="line">npm <span class="keyword">install</span> hexo-generator-category <span class="comment">--save</span></span><br><span class="line">npm <span class="keyword">install</span> hexo-generator-tag <span class="comment">--save</span></span></span><br></pre></td></tr></table></figure>
<h3 id="install_deplpyers">install deplpyers</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="operator"><span class="keyword">install</span> hexo-generator-<span class="keyword">index</span> <span class="comment">--save</span></span><br><span class="line">npm <span class="keyword">install</span> hexo-generator-archive <span class="comment">--save</span></span><br><span class="line">npm <span class="keyword">install</span> hexo-generator-category <span class="comment">--save</span></span><br><span class="line">npm <span class="keyword">install</span> hexo-generator-tag <span class="comment">--save</span></span></span><br></pre></td></tr></table></figure>
<h3 id="Note">Note</h3><p>在 _config 文件中 要把github的 type从 github改成 git<br>目前这个事hexo 3.0版本的一个小bug</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Hexo/">Hexo</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/05/05/migrate-hexo/#disqus_thread" class="comments-count-link">Comments</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2014/10/26/Singleton-Mode/" title="Singleton Mode" itemprop="url">Singleton Mode</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Zach Cai with Kathy Zhao" target="_blank" itemprop="author">Zach Cai with Kathy Zhao</a>
		
  <p class="article-time">
    <time datetime="2014-10-27T01:34:13.000Z" itemprop="datePublished"> 發表於 Oct 26 2014</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="[Design_Pattern]_Singleton">[Design Pattern] Singleton</h3><h4 id="First_sight">First sight</h4><ol>
<li>Override the private constructor to avoid any new object creation with new operator.</li>
<li>Declare a private static instance of the same class</li>
<li>Provide a public static method that will return the singleton class instance variable. If the variable is not initialized then initialize it or else simply return the instance variable.<br>the code below is the raw version of the singleton pattern</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton instance = <span class="keyword">null</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (instance == <span class="keyword">null</span>) &#123;</span><br><span class="line">            instance = <span class="keyword">new</span> Singleton();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="How_to_make_it_Thread-Safe">How to make it Thread-Safe</h4><p>add synchronized keyword to the getInstance() method<br>this way is easy to think about, but if the instance is created, then we do not have to add lock to that getInstance() method. So we need to think about other ways.</p>
<h5 id="Try_to_use_synchronized_block_instead_of_the_whole_method">Try to use synchronized block instead of the whole method</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton instance = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Object mutex = <span class="keyword">new</span> Object(); <span class="comment">// volatile makes this Oject could be seen by other thread immediately when changing value</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (instance == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span>(mutex) &#123;</span><br><span class="line">                <span class="keyword">if</span>(instance==<span class="keyword">null</span>) </span><br><span class="line">                    instance= <span class="keyword">new</span> ASingleton();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="Using_double_check">Using double check</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Works with acquire/release semantics for volatile</span></span><br><span class="line"><span class="comment">// Broken under Java 1.4 and earlier semantics for volatile</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> Helper helper = <span class="keyword">null</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Helper <span class="title">getHelper</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Helper result = helper;</span><br><span class="line">        <span class="keyword">if</span> (result == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span>(<span class="keyword">this</span>) &#123;</span><br><span class="line">                result = helper;</span><br><span class="line">                <span class="keyword">if</span> (result == <span class="keyword">null</span>) &#123;</span><br><span class="line">                    helper = result = <span class="keyword">new</span> Helper();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// other functions and members...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="Using_lazy_initialization">Using lazy initialization</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Correct lazy initialization in Java </span></span><br><span class="line"><span class="annotation">@ThreadSafe</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">HelperHolder</span> </span>&#123;</span><br><span class="line">       <span class="keyword">public</span> <span class="keyword">static</span> Helper helper = <span class="keyword">new</span> Helper();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Helper <span class="title">getHelper</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> HelperHolder.helper;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Tech-Interview/">Tech Interview</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Tech-Trick/">Tech Trick</a><a href="/tags/design/">design</a><a href="/tags/thread/">thread</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2014/10/26/Singleton-Mode/#disqus_thread" class="comments-count-link">Comments</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2014/10/13/Implement-Trie/" title="Implement Trie" itemprop="url">Implement Trie</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Zach Cai with Kathy Zhao" target="_blank" itemprop="author">Zach Cai with Kathy Zhao</a>
		
  <p class="article-time">
    <time datetime="2014-10-14T03:03:37.000Z" itemprop="datePublished"> 發表於 Oct 13 2014</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="simply_implement_the_insert_and_delete_function">simply implement the insert and delete function</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TrieNode</span> </span>&#123; </span><br><span class="line">    <span class="keyword">private</span> TrieNode[] children;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">char</span> character;</span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TrieNode</span><span class="params">(<span class="keyword">char</span> c)</span> </span>&#123;</span><br><span class="line">        children = <span class="keyword">new</span> TrieNode[<span class="number">26</span>];</span><br><span class="line">        character = c;</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insert</span><span class="params">(String word)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (word.length() == <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">         </span><br><span class="line">        <span class="keyword">int</span> charPos = word.charAt(<span class="number">0</span>) - <span class="string">'a'</span>;</span><br><span class="line">         </span><br><span class="line">        <span class="keyword">if</span> (children[charPos] == <span class="keyword">null</span>)</span><br><span class="line">            children[charPos] = <span class="keyword">new</span> TrieNode(word.charAt(<span class="number">0</span>));</span><br><span class="line">         </span><br><span class="line">        children[charPos].insert(word.substring(<span class="number">1</span>));</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">search</span><span class="params">(String word)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (word.length() == <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">         </span><br><span class="line">        <span class="keyword">int</span> charPos = word.charAt(<span class="number">0</span>) - <span class="string">'a'</span>;</span><br><span class="line">         </span><br><span class="line">        <span class="keyword">if</span> (children[charPos] == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">         </span><br><span class="line">        <span class="keyword">return</span> children[charPos].search(word.substring(<span class="number">1</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Algorithm-and-Data-Structure/">Algorithm and Data Structure</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Tree/">Tree</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2014/10/13/Implement-Trie/#disqus_thread" class="comments-count-link">Comments</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2014/10/13/Synchronized-and-Multi-thread-problems/" title="Synchronized and Multi-thread problems" itemprop="url">Synchronized and Multi-thread problems</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Zach Cai with Kathy Zhao" target="_blank" itemprop="author">Zach Cai with Kathy Zhao</a>
		
  <p class="article-time">
    <time datetime="2014-10-13T19:20:03.000Z" itemprop="datePublished"> 發表於 Oct 13 2014</time>
    
  </p>
</header>
    <div class="article-content">
        
        <!-- # Welcome the the multi-thread problems -->
<!-- --------- -->
<h2 id="Concurrency">Concurrency</h2><h3 id="Threads_vs_Processes">Threads vs Processes</h3><p>Each process provides the resources needed to execute a program. Each process is started with a single thread, often called the primary thread, but can create additional threads from any of its threads. A thread is the entity within a process that can be scheduled for execution. All threads of a process share its virtual address space and system resources.</p>
<blockquote>
<p>e.g. What’s the difference between a thread and a process? ( CtCI: 16.1)</p>
</blockquote>
<h3 id="Concurrency_vs_Parallelism">Concurrency vs Parallelism</h3><p>Concurrency is when two tasks can start, run, and complete in overlapping time periods. It doesn’t necessarily mean they’ll ever both be running at the same instant. e.g. multitasking on a single-core machine.<br>Parallelism is when tasks literally run at the same time, eg. on a multicore processor.</p>
<h3 id="Deadlocks">Deadlocks</h3><p>A deadlock is a situation that each thread is waiting for the other thread to reliquish a lock.<br>Deadlock conditions: (1) Mutual Exclusion (2) Hold and Wait (3) No Preemption (4) Circular Wait.</p>
<blockquote>
<p>“Circular Wait” is the key to judge deadlock：Build a directed graph, each edge (w,v) exist if a process declare that it will request lock v right after lock w.Any circle in this graph correspond to a deadlock.</p>
</blockquote>
<h4 id="Famous_dining_philosophers">Famous dining philosophers</h4><p>use the lock() to solve this problem<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Chopstick</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Lock lock;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Chopstick</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        lock = <span class="keyword">new</span> ReentrantLock();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">pickUp</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> lock.tryLock();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">putDown</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        lock.unlock();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Philosopher</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> bites = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">private</span> Chopstick left;</span><br><span class="line">    <span class="keyword">private</span> Chopstick right;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Philosopher</span><span class="params">(Chopstick left, Chopstick right)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.left = left;</span><br><span class="line">        <span class="keyword">this</span>.right = right;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (pickUp()) &#123;</span><br><span class="line">            chew();</span><br><span class="line">            putDown();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">pickUp</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">/* attempt to pick up */</span></span><br><span class="line">        <span class="keyword">if</span> (!left.pickUp()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!right.pickUp()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">chew</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">putDown</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        left.putDown();</span><br><span class="line">        right.putDown();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; bites; i++) &#123;</span><br><span class="line">            eat();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>note: To prevent deadlock, we can implement a strategy where a philosopher will put down his left chopstick if he is unable to obtain the right one.</p>
</blockquote>
<h2 id="Concurrancy_in_java">Concurrancy in java</h2><p>When a standalone application is run, a user thread is automatically created to execute the main() method.</p>
<h3 id="Create_a_thread">Create a thread</h3><p>step1: public class RunnableThread implements Runnable + Thread thread = new Thread(instance); 或<br>public class ThreadExample extends Thread + ThreadExample thread = new ThreadExample(); 需要实现 public void run()<br>step2: 运行 thread.start();</p>
<table>
<thead>
<tr>
<th>Action</th>
<th style="text-align:right">Method 1</th>
<th style="text-align:center">Method 2</th>
</tr>
</thead>
<tbody>
<tr>
<td>Step 1</td>
<td style="text-align:right">class RunnableThread implements Runnable</td>
<td style="text-align:center">class ThreadExample extends Thread</td>
</tr>
<tr>
<td>Step 2</td>
<td style="text-align:right">Thread thread = new Thread(instance);</td>
<td style="text-align:center">ThreadExample thread = new ThreadExample();</td>
</tr>
<tr>
<td>Step 3</td>
<td style="text-align:right">thread.start();</td>
<td style="text-align:center">thread.start();</td>
</tr>
</tbody>
</table>
<blockquote>
<p>note: need to implement void run() {} before thread.start();</p>
</blockquote>
<h3 id="Synchronization_and_Locks">Synchronization and Locks</h3><p>给method或block加注synchronized关键词，即禁止不同thread访问同一object的任何synchronized对象；特别地，如果加注static关键词，则对该class的synchronized区域有效。<br>JAVA的实现类 ReentrantLock 提供更加精细的控制，lock()可以用于尝试获取控制权，若当前lock由其他thread控制，则当前thread禁用并等待，直到 owner thread 释放控制权；相对地，trylock()则立即返回false。unlock()则用于释放控制权。</p>
<blockquote>
<p>e.g. You are given a class with synchronized method A &amp; B, and a normal method C.If you have two threads visiting the same instance of that class, they cannot execute A &amp; B at the same time, but they can execute A &amp; C simultaneously.</p>
</blockquote>
<h3 id="Implement_a_thread-safe_Blocking_queue">Implement a thread-safe Blocking queue</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BlockingQueue</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> List queue = <span class="keyword">new</span> LinkedList();</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span>  limit = <span class="number">10</span>;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">BlockingQueue</span><span class="params">(<span class="keyword">int</span> limit)</span></span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.limit = limit;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//enque method</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">enqueue</span><span class="params">(Object item)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(<span class="keyword">this</span>.queue.size() == <span class="keyword">this</span>.limit) &#123;</span><br><span class="line">      wait();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//Notify all the threads that are waiting </span></span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">this</span>.queue.size() == <span class="number">0</span>) &#123;</span><br><span class="line">      notifyAll();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.queue.add(item);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// dequeue method</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> Object <span class="title">dequeue</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(<span class="keyword">this</span>.queue.size() == <span class="number">0</span>)&#123;</span><br><span class="line">      wait();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">this</span>.queue.size() == <span class="keyword">this</span>.limit)&#123;<span class="function">f</span><br><span class="line">      <span class="title">notifyAll</span><span class="params">()</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.queue.remove(<span class="number">0</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>note: this code uses the moniter structure in java, you do not need to declare a moniter, but you could use wait() and notifyAll() directyl</li>
<li>note: if you used wait() sleep() join() method, you must throw InterruptedException</li>
</ul>
</blockquote>
<h3 id="Implement_Read/Write_Lock_for_HashMap/Buffer/etc">Implement Read/Write Lock for HashMap/Buffer/etc</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyMap</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Map&lt;K,V&gt; m = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> ReentrantReadWriteLock rwl = <span class="keyword">new</span> ReentrantReadWriteLock(<span class="keyword">true</span>);  <span class="comment">// fair mode</span></span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">public</span> V <span class="title">get</span><span class="params">(K key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            rwl.readLock().lock();</span><br><span class="line">            <span class="keyword">return</span> m.get(key);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            rwl.readLock().unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> V <span class="title">put</span><span class="params">(K key, V value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            rwl.writeLock().lock();</span><br><span class="line">            <span class="keyword">return</span> m.put(key, value);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            rwl.writeLock().unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Tech-Interview/">Tech Interview</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/OS/">OS</a><a href="/tags/Synchronize/">Synchronize</a><a href="/tags/thread/">thread</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2014/10/13/Synchronized-and-Multi-thread-problems/#disqus_thread" class="comments-count-link">Comments</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2014/10/09/Add-Binary/" title="Add Binary" itemprop="url">Add Binary</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Zach Cai with Kathy Zhao" target="_blank" itemprop="author">Zach Cai with Kathy Zhao</a>
		
  <p class="article-time">
    <time datetime="2014-10-10T04:24:31.000Z" itemprop="datePublished"> 發表於 Oct 9 2014</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="Add_Binary">Add Binary</h3><p>Given two binary strings, return their sum (also a binary string).</p>
<p>For example,<br>a = “11”<br>b = “1”<br>Return “100”.</p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> class Solution &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">String</span> addBinary(<span class="keyword">String</span> a, <span class="keyword">String</span> b) &#123;</span><br><span class="line">        <span class="built_in">char</span>[] c1 = a.toCharArray();</span><br><span class="line">        <span class="built_in">char</span>[] c2 = b.toCharArray();</span><br><span class="line">        <span class="built_in">int</span> l1 = c1.length;</span><br><span class="line">        <span class="built_in">int</span> l2 = c2.length;</span><br><span class="line">        <span class="built_in">int</span>[] c3 = <span class="keyword">new</span> <span class="built_in">int</span>[Math.<span class="built_in">max</span>(c1.length, c2.length)+<span class="number">1</span>];</span><br><span class="line">        <span class="built_in">int</span> l3 = c3.length;</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; Math.<span class="built_in">max</span>(c1.length, c2.length); i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i &lt; l1) &#123; c3[l3-i-<span class="number">1</span>] += (<span class="built_in">int</span>)(c1[l1-i-<span class="number">1</span>] - <span class="string">'0'</span>); &#125;</span><br><span class="line">            <span class="keyword">if</span> (i &lt; l2) &#123; c3[l3-i-<span class="number">1</span>] += (<span class="built_in">int</span>)(c2[l2-i-<span class="number">1</span>] - <span class="string">'0'</span>); &#125;</span><br><span class="line">            c3[l3-i-<span class="number">2</span>] = c3[l3-i-<span class="number">1</span>] / <span class="number">2</span>;</span><br><span class="line">            c3[l3-i-<span class="number">1</span>] %= <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        StringBuffer sb = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; l3; i++) &#123;sb.<span class="built_in">append</span>(c3[i]); &#125;</span><br><span class="line">        <span class="keyword">String</span> res = sb.toString();</span><br><span class="line">        <span class="keyword">if</span> (res.charAt(<span class="number">0</span>) == <span class="string">'0'</span>) <span class="keyword">return</span> res.substring(<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Add_1_to_a_Int_without_using_‘+’_or_‘-‘">Add 1 to a Int without using ‘+’ or ‘-‘</h3><p>This time, bit manipulation will be a good way.<br><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">int</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> a)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> res = a;</span><br><span class="line">    <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> ((a &amp; <span class="number">1</span>) == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> (res | (<span class="number">1</span>&lt;&lt;i));</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            res &amp;= ~(<span class="number">1</span>&lt;&lt;i);</span><br><span class="line">            a = a &gt;&gt; <span class="number">1</span>;</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/LeetCode/">LeetCode</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Bit/">Bit</a><a href="/tags/Tech-Trick/">Tech Trick</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2014/10/09/Add-Binary/#disqus_thread" class="comments-count-link">Comments</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2014/10/08/Loop-unwinding/" title="Loop unwinding" itemprop="url">Loop unwinding</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Zach Cai with Kathy Zhao" target="_blank" itemprop="author">Zach Cai with Kathy Zhao</a>
		
  <p class="article-time">
    <time datetime="2014-10-08T23:34:33.000Z" itemprop="datePublished"> 發表於 Oct 8 2014</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="Loop_Unwinding">Loop Unwinding</h3><h1 id="Original_Version">Original Version</h1><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= <span class="number">60</span>; i++) <span class="comment">&#123;</span><br><span class="line">   a[i] = a[i] * b + c;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<h1 id="Improved_Version">Improved Version</h1><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= <span class="number">60</span>; i+=<span class="number">3</span>) <span class="comment">&#123;</span><br><span class="line">  a[i] = a[i] * b + c;</span><br><span class="line">  a[i+1] = a[i+1] * b + c;</span><br><span class="line">  a[i+2] = a[i+2] * b + c;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<p>As we could see, the run times of ‘i&lt;=60’ and i++ have been reduced 3 times<br>Although the code is not that elegent, but the performance will be advanced.</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Code-Trick/">Code Trick</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Compiler/">Compiler</a><a href="/tags/Tech-Trick/">Tech Trick</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2014/10/08/Loop-unwinding/#disqus_thread" class="comments-count-link">Comments</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2014/10/08/Iterator-Storm/" title="Iterator Storm" itemprop="url">Iterator Storm</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Zach Cai with Kathy Zhao" target="_blank" itemprop="author">Zach Cai with Kathy Zhao</a>
		
  <p class="article-time">
    <time datetime="2014-10-08T17:01:28.000Z" itemprop="datePublished"> 發表於 Oct 8 2014</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="Question_:_Implement_peek()_and_pop()_from_java_iterator()-_for_example_[1,2,3,4,5],_peek()_=_1,_pop()_=_1,_peek()_=_2,_peek()_=_2,_pop()_=_2">Question : Implement peek() and pop() from java iterator(). for   example [1,2,3,4,5], peek() = 1, pop() = 1, peek() = 2, peek() = 2, pop() = 2</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PeekIterator</span>&lt;<span class="title">T</span>&gt; <span class="keyword">implements</span> <span class="title">Iterator</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Iterator&lt;T&gt; iterator;     <span class="comment">// notice there is a keyword'final'</span></span><br><span class="line">    <span class="keyword">private</span> T nextitem;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">PeekIterator</span><span class="params">(Iterator&lt;T&gt; iterator)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.iterator = iterator;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (nextitem != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (iterator.hasNext()) &#123;</span><br><span class="line">            nextitem = iterator.next();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> nextitem != <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">next</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!hasNext()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> (<span class="keyword">new</span> NoSuchElementException(<span class="string">"Iterator has no elements left."</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        T toReturn = nextitem;</span><br><span class="line">        nextitem = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">return</span> toReturn;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">peek</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!hasNext()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> (<span class="keyword">new</span> NoSuchElementException(<span class="string">"Iterator has no elements left."</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> nextitem;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> UnsupportedOperationException();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Note: there is a ‘final’ modifier for iterator, I think it is because we need to keep consistency for inner and outer iteraters. </p>
</blockquote>
<h3 id="Question_:_Rotate_Iterater">Question : Rotate Iterater</h3><p>实现一个rotateIterator(), 构造函数传入List<iterator>, 实现next(), hasNext().例如:<br>传入的三个iterator里面的值分别是[[1,2,3],[4,5,6], [7,8]], 那rotateIterator的next()应该输出[1,4,7,2,5,8,3,6]. 就是竖着遍历每个iterator输出, 如果当前的iterator没有了, 就跳到下一个.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RotateIterator</span>&lt;<span class="title">E</span>&gt; <span class="keyword">implements</span> <span class="title">Iterator</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> List&lt;Iterator&lt;E&gt;&gt; l;</span><br><span class="line">    <span class="keyword">public</span> Queue&lt;Integer&gt; q = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RotateIterator</span><span class="params">(List&lt;Iterator&lt;E&gt;&gt; it)</span> </span>&#123;</span><br><span class="line">        l = it;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; it.size(); i++)</span><br><span class="line">            q.offer(i);</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (!q.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">int</span> i = q.peek();</span><br><span class="line">            <span class="keyword">if</span> (l.get(i).hasNext())</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                q.poll();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> E <span class="title">next</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (!q.isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">int</span> i = q.peek();</span><br><span class="line">            <span class="keyword">if</span> (l.get(i).hasNext()) &#123;</span><br><span class="line">                q.poll();</span><br><span class="line">                q.offer(i);</span><br><span class="line">                <span class="keyword">return</span> l.get(i).next();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                q.poll();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">()</span> </span>&#123;</span><br><span class="line">         </span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></iterator></p>
<h3 id="Question_Deep_Iterator">Question Deep Iterator</h3><p>This is used to do the iterative in List<list></list></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DeepIterator</span>&lt;<span class="title">T</span>&gt; <span class="keyword">implements</span> <span class="title">Iterator</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="comment">// A reference to the item which will be returned during</span></span><br><span class="line">    <span class="comment">// the next call to next().</span></span><br><span class="line">    <span class="keyword">private</span> T nextItem;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Stack&lt;Iterator&lt;?&gt;&gt; stack = <span class="keyword">new</span> Stack&lt;Iterator&lt;?&gt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DeepIterator</span><span class="params">(Collection&lt;?&gt; collection)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (collection == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException(<span class="string">"Can't iterate over a null collection."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        stack.push(collection.iterator());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="annotation">@SuppressWarnings</span>(<span class="string">"unchecked"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (nextItem != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (!stack.isEmpty()) &#123;</span><br><span class="line">            Iterator&lt;?&gt; iter = stack.peek();</span><br><span class="line">            <span class="keyword">if</span> (iter.hasNext()) &#123;</span><br><span class="line">                Object item = iter.next();</span><br><span class="line">                <span class="keyword">if</span> (item <span class="keyword">instanceof</span> Collection&lt;?&gt;) &#123;</span><br><span class="line">                    stack.push(((Collection&lt;?&gt;) item).iterator());</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    nextItem = (T) item;</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                stack.pop();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">next</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (hasNext()) &#123;</span><br><span class="line">            T toReturn = nextItem;</span><br><span class="line">            nextItem = <span class="keyword">null</span>;</span><br><span class="line">            <span class="keyword">return</span> toReturn;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchElementException();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> UnsupportedOperationException();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Tech-Interview/">Tech Interview</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Iterator/">Iterator</a><a href="/tags/design/">design</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2014/10/08/Iterator-Storm/#disqus_thread" class="comments-count-link">Comments</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2014/10/07/Fight-for-50-days/" title="Fight for 50 days" itemprop="url">Fight for 50 days</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Zach Cai with Kathy Zhao" target="_blank" itemprop="author">Zach Cai with Kathy Zhao</a>
		
  <p class="article-time">
    <time datetime="2014-10-08T05:37:14.000Z" itemprop="datePublished"> 發表於 Oct 7 2014</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>Let’s fight for 50 days!<br>I am leeroy Jekkins!!!<br>Go! Go! Go!</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Diary/">Diary</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Snail/">Snail</a><a href="/tags/mood/">mood</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2014/10/07/Fight-for-50-days/#disqus_thread" class="comments-count-link">Comments</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2014/10/07/-LeetCode-Word-Break/" title="[LeetCode]Word Break" itemprop="url">[LeetCode]Word Break</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Zach Cai with Kathy Zhao" target="_blank" itemprop="author">Zach Cai with Kathy Zhao</a>
		
  <p class="article-time">
    <time datetime="2014-10-07T20:02:03.000Z" itemprop="datePublished"> 發表於 Oct 7 2014</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="1_Naive_version">1 Naive version</h3><p>You can use dfs to brute force search the solution.<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">public class Solution &#123;</span><br><span class="line">    public boolean wordBreak(String s, <span class="operator"><span class="keyword">Set</span>&lt;<span class="keyword">String</span>&gt; dict) &#123;</span><br><span class="line">             <span class="keyword">return</span> wordBreakHelper(s, dict, <span class="number">0</span>);</span></span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public boolean wordBreakHelper(String s, <span class="operator"><span class="keyword">Set</span>&lt;<span class="keyword">String</span>&gt; dict, <span class="built_in">int</span> <span class="keyword">start</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">start</span> == s.length()) </span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span></span><br><span class="line"> </span><br><span class="line">        for(String a: dict)&#123;</span><br><span class="line">            int len = a.length();</span><br><span class="line">            int <span class="operator"><span class="keyword">end</span> = <span class="keyword">start</span>+<span class="keyword">len</span>;</span></span><br><span class="line"> </span><br><span class="line">            //<span class="operator"><span class="keyword">end</span> <span class="keyword">index</span> should be &lt;= <span class="keyword">string</span> length</span><br><span class="line">            <span class="keyword">if</span>(<span class="keyword">end</span> &gt; s.length()) </span><br><span class="line">                <span class="keyword">continue</span>;</span></span><br><span class="line"> </span><br><span class="line">            if(s.substring(<span class="operator"><span class="keyword">start</span>, <span class="keyword">start</span>+<span class="keyword">len</span>).equals(a))</span><br><span class="line">                <span class="keyword">if</span>(wordBreakHelper(s, dict, <span class="keyword">start</span>+<span class="keyword">len</span>))</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">true</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="2-DP_O(n^2)">2.DP O(n^2)</h3><p>simple and clean<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">wordBreak</span><span class="params">(String s, Set&lt;String&gt; dict)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">boolean</span>[] d = <span class="keyword">new</span> <span class="keyword">boolean</span>[s.length()+<span class="number">1</span>];</span><br><span class="line">        d[<span class="number">0</span>] = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">int</span> n = s.length();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; i; j++) &#123;</span><br><span class="line">                d[i] |= dict.contains(s.substring(j,i)) &amp;&amp; d[j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> d[n];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="3-DP_in_O(nk)">3.DP in O(nk)</h3><p>sometimes, when the size of the dictionary is really small, using this solution will be much more faster than the O(n^2) solution.<br>Reference to <a href="http://www.programcreek.com/2012/12/leetcode-solution-word-break/" target="_blank" rel="external">http://www.programcreek.com/2012/12/leetcode-solution-word-break/</a><br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line">    <span class="keyword">public</span> <span class="typename">boolean</span> wordBreak(String s, Set&lt;String&gt; dict) &#123;</span><br><span class="line">        <span class="typename">boolean</span>[] t = <span class="keyword">new</span> <span class="typename">boolean</span>[s.length()+<span class="number">1</span>];</span><br><span class="line">        t[<span class="number">0</span>] = <span class="literal">true</span>; <span class="comment">//set first to be true, why?</span></span><br><span class="line">        <span class="comment">//Because we need initial state</span></span><br><span class="line"> </span><br><span class="line">        <span class="keyword">for</span>(<span class="typename">int</span> i=<span class="number">0</span>; i&lt;s.length(); i++)&#123;</span><br><span class="line">            <span class="comment">//should continue from match position</span></span><br><span class="line">            <span class="keyword">if</span>(!t[i]) </span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line"> </span><br><span class="line">            <span class="keyword">for</span>(String <span class="string">a:</span> dict)&#123;</span><br><span class="line">                <span class="typename">int</span> len = a.length();</span><br><span class="line">                <span class="typename">int</span> end = i + len;</span><br><span class="line">                <span class="keyword">if</span>(end &gt; s.length())</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line"> </span><br><span class="line">                <span class="keyword">if</span>(t[end]) <span class="keyword">continue</span>;</span><br><span class="line"> </span><br><span class="line">                <span class="keyword">if</span>(s.substring(i, end).equals(a))&#123;</span><br><span class="line">                    t[end] = <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">return</span> t[s.length()];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="4-follow_up_Word_Break_II">4.follow up Word Break II</h3><p>In this probelm, we need to run the word break I code first to judge whether this string could be break.<br>Because we need to print all of the solution, so DP is not that Beneficial. We could use brute force dfs here.<br><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">public class Solution &#123;</span><br><span class="line">    public ArrayList&lt;String&gt; wordBreak(String <span class="keyword">s</span>, Set&lt;String&gt; dict) &#123;</span><br><span class="line">        ArrayList&lt;String&gt; ret = new ArrayList&lt;String&gt;();</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">s</span>==null || <span class="keyword">s</span>.<span class="keyword">length</span>()==<span class="number">0</span>) <span class="keyword">return</span> ret;</span><br><span class="line">        boolean[] d = new boolean[<span class="keyword">s</span>.<span class="keyword">length</span>()+<span class="number">1</span>];</span><br><span class="line">        d[<span class="number">0</span>] = true;</span><br><span class="line">        <span class="keyword">int</span> n = <span class="keyword">s</span>.<span class="keyword">length</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; i; j++) &#123;</span><br><span class="line">                d[i] |= dict.contains(<span class="keyword">s</span>.substring(j,i)) &amp;&amp; d[j];</span><br><span class="line">                <span class="keyword">if</span> (d[i]) <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!d[n]) <span class="keyword">return</span> ret;</span><br><span class="line">        dfs(<span class="keyword">s</span>, <span class="number">0</span>, new StringBuffer(), ret, dict);</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void dfs(String <span class="keyword">s</span>, <span class="keyword">int</span> start, StringBuffer curr, ArrayList&lt;String&gt; ret, Set&lt;String&gt; dict)  &#123;</span><br><span class="line">        <span class="keyword">int</span> n = <span class="keyword">s</span>.<span class="keyword">length</span>();</span><br><span class="line">        <span class="keyword">if</span> (start &gt;= n) &#123;</span><br><span class="line">            ret.add(curr.toString());</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = start+<span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            String <span class="sub"><span class="keyword">sub</span> = s.substring(start, i);</span></span><br><span class="line">            <span class="keyword">if</span> (dict.contains(<span class="sub"><span class="keyword">sub</span>)) &#123;</span></span><br><span class="line">                <span class="keyword">int</span> temp = curr.<span class="keyword">length</span>();</span><br><span class="line">                <span class="keyword">if</span> (curr.<span class="keyword">length</span>() != <span class="number">0</span>) curr.append(<span class="string">" "</span>);</span><br><span class="line">                curr.append(<span class="sub"><span class="keyword">sub</span>);</span></span><br><span class="line">                dfs(<span class="keyword">s</span>, i, curr, ret, dict);</span><br><span class="line">                curr.<span class="keyword">delete</span>(temp, curr.<span class="keyword">length</span>());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/LeetCode/">LeetCode</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/DP/">DP</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2014/10/07/-LeetCode-Word-Break/#disqus_thread" class="comments-count-link">Comments</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2014/10/06/Create-an-Array-of-ArrayList/" title="Create an Array of ArrayList" itemprop="url">Create an Array of ArrayList</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Zach Cai with Kathy Zhao" target="_blank" itemprop="author">Zach Cai with Kathy Zhao</a>
		
  <p class="article-time">
    <time datetime="2014-10-06T23:43:56.000Z" itemprop="datePublished"> 發表於 Oct 6 2014</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>Sometime we want to create an array of arraylist<br>we could only use<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ArrayList&lt;ArrayList&lt;<span class="built_in">Element</span>&gt;&gt; a = <span class="keyword">new</span> ArrayList&lt;ArrayList&lt;<span class="built_in">Element</span>&gt;&gt;();</span><br></pre></td></tr></table></figure></p>
<p>At this time, we introduce another way,<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ArrayList&lt;<span class="built_in">Element</span>&gt;[] a = (ArrayList&lt;<span class="built_in">Element</span>&gt;[])<span class="keyword">new</span> ArrayList[<span class="number">4</span>];</span><br></pre></td></tr></table></figure></p>
<p>Enjoy!</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Code-Trick/">Code Trick</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Array/">Array</a><a href="/tags/java/">java</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2014/10/06/Create-an-Array-of-ArrayList/#disqus_thread" class="comments-count-link">Comments</a>
	
</div>

</footer>


    </article>







  <nav id="page-nav" class="clearfix">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">Next<span></span></a>
  </nav>

</div>
      <div class="openaside"><a class="navbutton" href="#" title="顯示側邊欄"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隱藏側邊欄"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">分類</p>
		<ul>
		
		  
			<li><a href="/categories/Algorithm-and-Data-Structure/" title="Algorithm and Data Structure">Algorithm and Data Structure<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Code-Trick/" title="Code Trick">Code Trick<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/Diary/" title="Diary">Diary<sup>6</sup></a></li>
		  
		
		  
			<li><a href="/categories/Hexo/" title="Hexo">Hexo<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/LeetCode/" title="LeetCode">LeetCode<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/Tech-Interview/" title="Tech Interview">Tech Interview<sup>3</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">標簽</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/Tech-Trick/" title="Tech Trick">Tech Trick<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/DP/" title="DP">DP<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/photo/" title="photo">photo<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/Chinese/" title="Chinese">Chinese<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/thread/" title="thread">thread<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/design/" title="design">design<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/Array/" title="Array">Array<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/OS/" title="OS">OS<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Compiler/" title="Compiler">Compiler<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Iterator/" title="Iterator">Iterator<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Tree/" title="Tree">Tree<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Mushroom/" title="Mushroom">Mushroom<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Snail/" title="Snail">Snail<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/java/" title="java">java<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Synchronize/" title="Synchronize">Synchronize<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Wine/" title="Wine">Wine<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Bit/" title="Bit">Bit<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/mushroom/" title="mushroom">mushroom<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Hexo/" title="Hexo">Hexo<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Git/" title="Git">Git<sup>1</sup></a></li>
			
		
		</ul>
</div>


  
  <div class="tagcloudlist">
    <p class="asidetitle">標簽雲</p>
    <div class="tagcloudlist clearfix">
       <a href="/tags/Array/" style="font-size: 10px;">Array</a><a href="/tags/Bit/" style="font-size: 10px;">Bit</a><a href="/tags/Chinese/" style="font-size: 13.33px;">Chinese</a><a href="/tags/Compiler/" style="font-size: 10px;">Compiler</a><a href="/tags/DP/" style="font-size: 16.67px;">DP</a><a href="/tags/Git/" style="font-size: 10px;">Git</a><a href="/tags/Hexo/" style="font-size: 10px;">Hexo</a><a href="/tags/Iterator/" style="font-size: 10px;">Iterator</a><a href="/tags/Mushroom/" style="font-size: 10px;">Mushroom</a><a href="/tags/Node-js/" style="font-size: 10px;">Node.js</a><a href="/tags/OS/" style="font-size: 10px;">OS</a><a href="/tags/Repost/" style="font-size: 10px;">Repost</a><a href="/tags/Snail/" style="font-size: 10px;">Snail</a><a href="/tags/Synchronize/" style="font-size: 10px;">Synchronize</a><a href="/tags/Tech-Trick/" style="font-size: 20px;">Tech Trick</a><a href="/tags/Tree/" style="font-size: 10px;">Tree</a><a href="/tags/Wine/" style="font-size: 10px;">Wine</a><a href="/tags/design/" style="font-size: 13.33px;">design</a><a href="/tags/java/" style="font-size: 10px;">java</a><a href="/tags/mood/" style="font-size: 10px;">mood</a><a href="/tags/mushroom/" style="font-size: 10px;">mushroom</a><a href="/tags/photo/" style="font-size: 13.33px;">photo</a><a href="/tags/thread/" style="font-size: 13.33px;">thread</a>
    </div>
  </div>


  <div class="linkslist">
  <p class="asidetitle">友情鏈接</p>
    <ul>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 訂閱</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello, we are Zach and Kathy. <br/>
			This is our blog to show some interesting things</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		
		<a href="https://github.com/fighterCZY for https://github.com/fighterczy" target="_blank" class="icon-github" title="github"></a>
		
		
		
		<a href="https://twitter.com/FighterCZY for https://twitter.com/fighterczy" target="_blank" class="icon-twitter" title="twitter"></a>
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2015 
		
		<a href="/about" target="_blank" title="Zach Cai with Kathy Zhao">Zach Cai with Kathy Zhao</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>





<script type="text/javascript">

var disqus_shortname = 'snailmushroomcom';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>






<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->

<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-55421065-1', 'snail-mushroom.com');  
ga('send', 'pageview');
</script>





<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回頂部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
 </html>
